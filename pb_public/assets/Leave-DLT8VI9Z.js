import{o as d,c as p,a,d as o,w as f,u as _,e as m,R as b,s as v}from"./index-C7IYLqTz.js";import{L as y}from"./ListDisplay-DyhM4usD.js";import{c as h,B as x}from"./BreadCrumb-TF3kDMJB.js";import{_ as w}from"./Status-B1a2wo_k.js";import{S as r}from"./sweetalert2.esm.all-DPo3DB14.js";import"./LoadingSkeleton-DhLAkGpz.js";import"./forms-uoaoRhcW.js";import"./index.esm-CWnM2rkH.js";import"./index-Cfw59jWj.js";const D={__name:"AcceptorReject",props:{item:Object,header:Object,reloadData:Function},setup(c){const t=c;async function l(i,e){if((await r.fire({title:`Are you sure want to ${e}?`,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#171717",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${e} it!`})).isConfirmed)try{h.collection(t.header.collection).update(t.item.id,{status:e})}catch(s){r.fire({title:"Error!",text:s.data.message,icon:"error"})}finally{r.fire({title:"Success!",text:"successfully updated",icon:"success"}),t.reloadData!==void 0&&t.reloadData()}}return(i,e)=>(d(),p("span",null,[a("button",{class:"button is-success is-small",onClick:e[0]||(e[0]=n=>l(t.item,"accepted"))}," Accept "),a("button",{class:"button is-danger is-small ml-2",onClick:e[1]||(e[1]=n=>l(t.item,"rejected"))}," Reject ")]))}},C={class:"container"},L={class:"card"},k={class:"card-content"},B={class:"is-flex is-flex-direction-row-reverse"},j={class:"mt-5"},T={__name:"Leave",setup(c){function t(n,s){const u=new Date(n);return(new Date(s)-u)/(1e3*60*60*24)+1}const i=[{name:"sn",label:"SN",type:"serial_number"},{name:"employee",label:"Employee",type:"expand",expandCollection:"employee",expandLabel:"name",isCombinedField:!0,link:!0,fields:["first_name","middle_name","last_name"]},{name:"leave_from",label:"Leave From",type:"date"},{name:"leave_to",label:"Leave To",type:"date"},{name:"days",label:"Days",type:"custom_component",component:v({props:{item:Object,header:Object},render(){return o("span",null,[t(this.item.leave_from,this.item.leave_to)," ",m("days")])}})},{name:"is_half",label:"Half Day",type:"text"},{name:"status",label:"Status",type:"custom_component",component:w},{name:"action",label:"Action",type:"custom_component",collection:"leave",component:D,can:!0},{name:"edit",label:"Edit",type:"action"}],e=[{name:"text_search",label:"Search",type:"text_search",fields:["employee.first_name","employee.middle_name","employee.last_name"],placeholder:"search"}];return(n,s)=>(d(),p("div",C,[o(x,{links:[{label:"Dashboard",path:"/",isActive:!1},{label:"Leave",path:"/leave",isActive:!0}]}),a("div",L,[a("div",k,[a("div",B,[o(_(b),{to:"/leave/add",class:"button is-dark"},{default:f(()=>s[0]||(s[0]=[a("i",{class:"bi bi-plus-circle px-1"},null,-1),m("Add Leave ")])),_:1})]),a("div",j,[o(y,{listHeader:i,collection:"leave",filter:e,expand:"employee",detailViewLink:"/leave/view"})])])])]))}};export{T as default};
