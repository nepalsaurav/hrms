import{r as m,c as s,d as p,a as e,F as d,f as u,o as r,n as b,t as w,g as x,v as A,u as E,h as F}from"./index-C7IYLqTz.js";import{t as k,v as B,g as C,f as _,a as j}from"./forms-uoaoRhcW.js";import{R as T}from"./RenderForms-DFjF9nMb.js";import{c as O,B as R}from"./BreadCrumb-TF3kDMJB.js";import{S as h}from"./sweetalert2.esm.all-DPo3DB14.js";import"./index.esm-CWnM2rkH.js";const N={class:"container"},P={class:"card"},V={class:"card-content"},z={class:"tabs"},I=["onClick"],J={class:"columns is-multiline"},Q={__name:"Add",setup(L){const y=F(),f=m([{name:"personal_details",label:"Personal Details"},{name:"contact_details",label:"Contact Details"},{name:"job_details",label:"Job Details"},{name:"payroll_and_benifits",label:"Payroll and Benefits"},{name:"additional_information",label:"Additional Information"}]),n=m("personal_details"),v=m({});function g(i){n.value=i}async function S(i){i.preventDefault();const o=i.target,a=new FormData(o);let t=Object.fromEntries(a.entries());t=k(t);const c=await B(t,j);if(c!=!0){v.value=c;const l=C(n.value,_,c);l!=null&&(n.value=l);return}try{const l=await O.collection("employee").create(t);console.log(l),h.fire({title:"Success!",text:"Successfully create employee",icon:"success"}),y.push("/employee")}catch(l){const D=l.data.message;h.fire({title:"Error!",text:D,icon:"error"})}}return(i,o)=>(r(),s("div",N,[p(R,{links:[{label:"Dashboard",path:"/",isActive:!1},{label:"Employee",path:"/employee",isActive:!1},{label:"Add",path:"/employee/add",isActive:!0}]}),e("div",P,[e("div",V,[e("form",{novalidate:"",onSubmit:S},[o[0]||(o[0]=e("legend",{class:"has-text-weight-bold"},"Add Employee",-1)),o[1]||(o[1]=e("div",{class:"is-flex is-flex-direction-row-reverse"},[e("button",{class:"button is-dark",type:"submit"}," Save ")],-1)),e("div",z,[e("ul",null,[(r(!0),s(d,null,u(f.value,a=>(r(),s("li",{class:b(a.name===n.value&&"is-active")},[e("a",{onClick:t=>g(a.name)},w(a.label),9,I)],2))),256))])]),(r(!0),s(d,null,u(f.value,a=>(r(),s("div",null,[x(e("div",J,[(r(!0),s(d,null,u(E(_)[a.name],t=>(r(),s("div",{class:b(["column",t.type==="rich_text"?"is-12":"is-4"])},[p(T,{form:t,errors:v.value},null,8,["form","errors"])],2))),256))],512),[[A,a.name===n.value]])]))),256))],32)])])]))}};export{Q as default};
