import{r as c,c as d,d as m,a as e,y,F as g,f as C,o as u,h as x}from"./index-C7IYLqTz.js";import{B as F,c as w}from"./BreadCrumb-TF3kDMJB.js";import{R as A}from"./RenderForms-DFjF9nMb.js";import{a as f,b as B}from"./utils-cUNVy0Hq.js";import{S as E}from"./sweetalert2.esm.all-DPo3DB14.js";import"./index.esm-CWnM2rkH.js";const O={class:"container"},S={class:"card"},V={class:"card-content"},j=["disabled"],I={class:"columns is-multiline"},D={class:"column is-4"},z={__name:"CheckIn",setup(R){const _=[{name:"employee",label:"Employee",collection:"employee",labelField:"first_name",firstOption:"select employee",type:"relational_field_select",isCombinedField:!0,combinedFields:["first_name","middle_name","last_name"],required:!0},{name:"check_in_time",label:"Check In Time",type:"text",disabled:!0}],r=c(!1),i=c({}),h=x(),p={check_in_time:f()};async function b(n){const t=n.target,a=new FormData(t);let s=Object.fromEntries(a.entries());s.date=B(),s.check_in_time=f(),s.status="pending",r.value=!0;try{await w.collection("check_in").create(s),E.fire({title:"success!",text:"check in added",icon:"success"}),h.push("/attendance")}catch(o){if(o.data.data){const l={};Object.entries(o.data.data).forEach(([v,k])=>{l[v]=k.message}),i.value=l}}finally{r.value=!1}}return(n,t)=>(u(),d("div",O,[m(F,{links:[{path:"/",label:"Dashboard",isActive:!1},{path:"/attendance",label:"Attendance",isActive:!1},{path:"/attendance/checkin",label:"Check In",isActive:!0}]}),e("div",S,[e("div",V,[e("form",{novalidate:"",onSubmit:y(b,["prevent"])},[e("fieldset",{disabled:r.value},[t[0]||(t[0]=e("legend",{class:"has-text-weight-bold"}," Add Check In ",-1)),t[1]||(t[1]=e("div",{class:"is-flex is-flex-direction-row-reverse"},[e("button",{class:"button is-dark",type:"submit"}," Save ")],-1)),e("div",I,[(u(),d(g,null,C(_,a=>e("div",D,[m(A,{form:a,errors:i.value,defaultValue:p[a.name]},null,8,["form","errors","defaultValue"])])),64))])],8,j)],32)])])]))}};export{z as default};
