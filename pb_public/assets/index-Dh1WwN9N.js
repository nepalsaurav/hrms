import{q as se,r as O,x as re,g as ce,o as g,c as S,a as m,t as I,u as x,d as F,F as Y,f as P,n as ue,p as fe,e as de,k as ve,m as B,S as U,B as A,U as me,V as te,W as w,X as he,Y as pe,Z as _e,$ as K,a0 as M,a1 as ye,a2 as be,a3 as oe,a4 as ge,a5 as we,a6 as Se}from"./index-DhUzF4e6.js";import{t as Ee}from"./forms-Lc3CRwVw.js";const ke={class:"field"},Le=["for"],Oe={class:"control"},xe={class:"select is-small",style:{width:"100%"}},De=["name","id"],$e={key:0,value:""},Te={key:1,value:""},Fe={key:2,value:""},Ae=["value","selected"],Ie={__name:"DynamicSelect",props:{item:Object},setup(e){const o=se(),t=e;let i=O(null),c=O(!1);return re(async()=>{try{const f=await ce.collection(t.item.collection).getFullList({});i.value=f}catch(f){console.log(f.data),c.value=!0}}),(f,d)=>(g(),S("div",ke,[m("label",{class:"label",for:e.item.name},[m("small",null,I(t.item.label),1)],8,Le),m("div",Oe,[m("div",xe,[m("select",{name:t.item.name,id:t.item.name,style:{width:"100%"}},[x(i)===null&&!x(c)?(g(),S("option",$e," Data is loading... ")):F("",!0),x(c)?(g(),S("option",Te," something error occured ")):F("",!0),x(c)?F("",!0):(g(),S("option",Fe,I(t.item.firstOption),1)),x(c)?F("",!0):(g(!0),S(Y,{key:3},P(x(i),r=>(g(),S("option",{value:r.id,selected:r.id===x(o).query[t.item.name]},I(r[t.item.labelField]),9,Ae))),256))],8,De)])])]))}},Me={class:"columns is-multiline"},We={key:0,class:"field"},Ce=["for"],je={class:"control"},Be=["id","name","value","placeholder"],He={key:1,class:"field"},Ve=["for"],Ne={class:"control"},Re={class:"select is-small",style:{width:"100%"}},qe=["name","id"],Xe=["value","selected"],tt={__name:"Filter",props:{filter:Array,routeBack:{type:String,default:"/employee"},resetList:{type:Function,default:null},filterFuntion:Function},setup(e){const o=e,t=ve(),i=se();function c(){return o.filter.filter(s=>s.name==="text_search")[0].fields}function f(u,s){return s.filter(l=>l.name===u)[0]}async function d(u){u.preventDefault();const s=u.target,n=new FormData(s);let l=Object.fromEntries(n.entries());if(l=Ee(l),Object.keys(l).length===0)return;const v=[],h={};if(l.text_search!==void 0){const y=l.text_search;h.text_search=y,c().forEach(p=>{v.push(`${p}~'${y}'`)})}for(const[y,b]of Object.entries(l))y!="text_search"&&b!=""&&(h[y]=b,f(y,o.filter).type==="select"?v.push(`${y}="${b}"`):v.push(`${y}?~"${b}"`));const _=v.join("||");h.filter=_,t.push({path:i.path,query:h})}function r(){t.push(i.path),o.resetList!==null&&o.resetList()}return(u,s)=>(g(),S("form",{novalidate:"",onSubmit:d},[m("div",Me,[(g(!0),S(Y,null,P(o.filter,n=>(g(),S("div",{class:ue(["column",o.filter.length===1?"is-6":"is-3"])},[n.type==="text_search"?(g(),S("div",We,[m("label",{class:"label",for:n.name},[m("small",null,I(n.label),1)],8,Ce),m("div",je,[m("input",{id:n.name,class:"input is-small",name:n.name,value:x(i).query.text_search,type:"text",placeholder:n.placeholder},null,8,Be)])])):F("",!0),n.type==="select"?(g(),S("div",He,[m("label",{class:"label",for:n.name},[m("small",null,I(n.label),1)],8,Ve),m("div",Ne,[m("div",Re,[m("select",{name:n.name,id:n.name,style:{width:"100%"}},[(g(!0),S(Y,null,P(n.options,l=>(g(),S("option",{value:l.value,selected:l.value===x(i).query[n.name]},I(l.label),9,Xe))),256))],8,qe)])])])):F("",!0),n.type==="relational_field_select"?(g(),fe(Ie,{key:2,item:n},null,8,["item"])):F("",!0)],2))),256)),m("div",{class:"column is-12"},[m("div",{class:"field"},[m("div",{class:"control"},[s[0]||(s[0]=m("button",{class:"button is-dark is-small",type:"submit"},[m("i",{class:"bi bi-search pr-1"}),de(" Search ")],-1)),m("button",{class:"button is-secondary ml-2 is-small",onClick:r}," Reset ")])])])])],32))}},R=ge?window:void 0;function j(e){var o;const t=w(e);return(o=t==null?void 0:t.$el)!=null?o:t}function z(...e){let o,t,i,c;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,i,c]=e,o=R):[o,t,i,c]=e,!o)return M;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const f=[],d=()=>{f.forEach(n=>n()),f.length=0},r=(n,l,v,h)=>(n.addEventListener(l,v,h),()=>n.removeEventListener(l,v,h)),u=B(()=>[j(o),w(c)],([n,l])=>{if(d(),!n)return;const v=ye(l)?{...l}:l;f.push(...t.flatMap(h=>i.map(_=>r(n,h,_,v))))},{immediate:!0,flush:"post"}),s=()=>{u(),d()};return K(s),s}function Ye(){const e=O(!1),o=Se();return o&&re(()=>{e.value=!0},o),e}function Pe(e){const o=Ye();return A(()=>(o.value,!!e()))}function Ue(e,o,t={}){const{root:i,rootMargin:c="0px",threshold:f=0,window:d=R,immediate:r=!0}=t,u=Pe(()=>d&&"IntersectionObserver"in d),s=A(()=>{const _=w(e);return(Array.isArray(_)?_:[_]).map(j).filter(be)});let n=M;const l=O(r),v=u.value?B(()=>[s.value,j(i),l.value],([_,y])=>{if(n(),!l.value||!_.length)return;const b=new IntersectionObserver(o,{root:j(y),rootMargin:c,threshold:f});_.forEach(p=>p&&b.observe(p)),n=()=>{b.disconnect(),n=M}},{immediate:r,flush:"post"}):M,h=()=>{n(),v(),l.value=!1};return K(h),{isSupported:u,isActive:l,pause(){n(),l.value=!1},resume(){l.value=!0},stop:h}}function ze(e,o={}){const{window:t=R,scrollTarget:i,threshold:c=0,rootMargin:f}=o,d=O(!1);return Ue(e,r=>{let u=d.value,s=0;for(const n of r)n.time>=s&&(s=n.time,u=n.isIntersecting);d.value=u},{root:i,window:t,threshold:c,rootMargin:w(f)}),d}function N(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const ne=1;function Ke(e,o={}){const{throttle:t=0,idle:i=200,onStop:c=M,onScroll:f=M,offset:d={left:0,right:0,top:0,bottom:0},eventListenerOptions:r={capture:!1,passive:!0},behavior:u="auto",window:s=R,onError:n=a=>{console.error(a)}}=o,l=O(0),v=O(0),h=A({get(){return l.value},set(a){y(a,void 0)}}),_=A({get(){return v.value},set(a){y(void 0,a)}});function y(a,$){var E,W,C,V;if(!s)return;const L=w(e);if(!L)return;(C=L instanceof Document?s.document.body:L)==null||C.scrollTo({top:(E=w($))!=null?E:_.value,left:(W=w(a))!=null?W:h.value,behavior:w(u)});const D=((V=L==null?void 0:L.document)==null?void 0:V.documentElement)||(L==null?void 0:L.documentElement)||L;h!=null&&(l.value=D.scrollLeft),_!=null&&(v.value=D.scrollTop)}const b=O(!1),p=U({left:!0,right:!1,top:!0,bottom:!1}),k=U({left:!1,right:!1,top:!1,bottom:!1}),H=a=>{b.value&&(b.value=!1,k.left=!1,k.right=!1,k.top=!1,k.bottom=!1,c(a))},ae=we(H,t+i),q=a=>{var $;if(!s)return;const E=(($=a==null?void 0:a.document)==null?void 0:$.documentElement)||(a==null?void 0:a.documentElement)||j(a),{display:W,flexDirection:C,direction:V}=getComputedStyle(E),L=V==="rtl"?-1:1,D=E.scrollLeft;k.left=D<l.value,k.right=D>l.value;const G=D*L<=(d.left||0),J=D*L+E.clientWidth>=E.scrollWidth-(d.right||0)-ne;W==="flex"&&C==="row-reverse"?(p.left=J,p.right=G):(p.left=G,p.right=J),l.value=D;let T=E.scrollTop;a===s.document&&!T&&(T=s.document.body.scrollTop),k.top=T<v.value,k.bottom=T>v.value;const Q=T<=(d.top||0),ee=T+E.clientHeight>=E.scrollHeight-(d.bottom||0)-ne;W==="flex"&&C==="column-reverse"?(p.top=ee,p.bottom=Q):(p.top=Q,p.bottom=ee),v.value=T},Z=a=>{var $;if(!s)return;const E=($=a.target.documentElement)!=null?$:a.target;q(E),b.value=!0,ae(a),f(a)};return z(e,"scroll",t?pe(Z,t,!0,!1):Z,r),_e(()=>{try{const a=w(e);if(!a)return;q(a)}catch(a){n(a)}}),z(e,"scrollend",H,r),{x:h,y:_,isScrolling:b,arrivedState:p,directions:k,measure(){const a=w(e);s&&a&&q(a)}}}function le(e,o,t={}){var i;const{direction:c="bottom",interval:f=100,canLoadMore:d=()=>!0}=t,r=U(Ke(e,{...t,offset:{[c]:(i=t.distance)!=null?i:0,...t.offset}})),u=O(),s=A(()=>!!u.value),n=A(()=>N(w(e))),l=ze(n);function v(){if(r.measure(),!n.value||!l.value||!d(n.value))return;const{scrollHeight:_,clientHeight:y,scrollWidth:b,clientWidth:p}=n.value,k=c==="bottom"||c==="top"?_<=y:b<=p;(r.arrivedState[c]||k)&&(u.value||(u.value=Promise.all([o(r),new Promise(H=>setTimeout(H,f))]).finally(()=>{u.value=null,te(()=>v())})))}const h=B(()=>[r.arrivedState[c],l.value],v,{immediate:!0});return me(h),{isLoading:s,reset(){te(()=>v())}}}const ot={mounted(e,o){typeof o.value=="function"?le(e,o.value):le(e,...o.value)}};function ie(e){const o=window.getComputedStyle(e);if(o.overflowX==="scroll"||o.overflowY==="scroll"||o.overflowX==="auto"&&e.clientWidth<e.scrollWidth||o.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:ie(t)}}function Ze(e){const o=e||window.event,t=o.target;return ie(t)?!1:o.touches.length>1?!0:(o.preventDefault&&o.preventDefault(),!1)}const X=new WeakMap;function Ge(e,o=!1){const t=O(o);let i=null,c="";B(he(e),r=>{const u=N(w(r));if(u){const s=u;if(X.get(s)||X.set(s,s.style.overflow),s.style.overflow!=="hidden"&&(c=s.style.overflow),s.style.overflow==="hidden")return t.value=!0;if(t.value)return s.style.overflow="hidden"}},{immediate:!0});const f=()=>{const r=N(w(e));!r||t.value||(oe&&(i=z(r,"touchmove",u=>{Ze(u)},{passive:!1})),r.style.overflow="hidden",t.value=!0)},d=()=>{const r=N(w(e));!r||!t.value||(oe&&(i==null||i()),r.style.overflow=c,X.delete(r),t.value=!1)};return K(d),A({get(){return t.value},set(r){r?f():d()}})}function Je(){let e=!1;const o=O(!1);return(t,i)=>{if(o.value=i.value,e)return;e=!0;const c=Ge(t,i.value);B(o,f=>c.value=f)}}Je();export{tt as _,ot as v};
