import{l as S,r as o,m as x,P as A,Q as D,c as r,b as v,a as s,p as C,d as m,I as E,F as y,f as V,u as F,t as L,q as R,o as l,n as j,j as K,k as M,g as _,L as N}from"./index-DhUzF4e6.js";import{B as O}from"./BreadCrumb-QusY3eB5.js";import{f as P}from"./form-BqK9qc89.js";import"./index.esm-DyswK6GF.js";import{S as z}from"./sweetalert2.esm.all-CIewtpap.js";const q={class:"card"},I={class:"card-content"},Q=["disabled"],T={class:"is-flex is-flex-direction-row-reverse"},G={class:"columns mt-4 is-multiline"},H={key:2,class:"has-text-danger"},$={__name:"Edit",setup(J){const{formModel:h}=S(),u=o(!1),f=o({});M();const d=R(),n=o(null),c=o(null),i=o(!1);x(d.params,b,{immediate:!0});async function b(){n.value=c.value=null,i.value=!0;try{const e=await _.collection("salary_component").getOne(d.params.id);n.value=e}catch(e){c.value=e.data.message}finally{i.value=!1}}async function k(e){u.value=!0;try{await _.collection("salary_component").update(d.params.id,h),z.fire({title:"success",text:"successfully edited salary components",icon:"success"})}catch(a){if(a.data.data){const t={};Object.entries(a.data.data).forEach(([w,B])=>{t[w]=B.message}),f.value=t}}finally{u.value=!1}}const p=A("saveButton");function g(e){var a;(e.ctrlKey||e.metaKey)&&e.key==="s"&&(e.preventDefault(),(a=p.value)==null||a.click())}return D("keydown",g),(e,a)=>(l(),r(y,null,[v(O,{links:[{label:"Dashboard",path:"/",isActive:!1},{label:"Payroll",path:"/payroll",isActive:!0},{label:"Sarary Component",path:"/payroll/salary_component",isActive:!1},{label:"Add",path:"/payroll/salary_component/add",isActive:!0}]}),s("div",q,[s("div",I,[i.value?(l(),C(N,{key:0})):m("",!0),n.value!==null?(l(),r("form",{key:1,novalidate:"",onSubmit:E(k,["prevent"])},[s("fieldset",{disabled:u.value},[a[0]||(a[0]=s("legend",{class:"has-text-weight-bold"}," Add Salary Component ",-1)),s("div",T,[s("button",{type:"submit",class:"button is-dark",ref_key:"saveButton",ref:p}," Save ",512)]),s("div",G,[(l(!0),r(y,null,V(F(P),t=>(l(),r("div",{class:j(["column",t.size])},[v(K,{form:t,errors:f.value,defaultValue:n.value[t.name]},null,8,["form","errors","defaultValue"])],2))),256))])],8,Q)],32)):m("",!0),!i.value&&c.value!==null?(l(),r("p",H,L(c.value),1)):m("",!0)])])],64))}};export{$ as default};
