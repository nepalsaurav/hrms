import{B as y}from"./BreadCrumb-QusY3eB5.js";import{f as w,v as E}from"./forms-D_1mYhwY.js";import{r as c,c as d,b as u,a as e,F as S,f as x,u as F,g as v,o as f,j as k,k as A}from"./index-DhUzF4e6.js";import{t as B,v as D,a as j}from"./utils-RVpx9FsL.js";import{S as p}from"./sweetalert2.esm.all-CIewtpap.js";import"./index.esm-DyswK6GF.js";const O={class:"container"},V={class:"card"},N={class:"card-content"},L=["disabled"],R={class:"columns is-multiline"},C={class:"column is-4"},H={__name:"Add",setup(I){const o=c({}),l=c(!1),_=A(),i=JSON.parse(localStorage.getItem("employee")),b={employee:i==null?void 0:i.id,status:"pending"},g=c();async function h(n){n.preventDefault();try{await v.collection("leave").create(formModel)}catch(r){console.log(r)}const a=n.target,s=new FormData(a);let t=B(Object.fromEntries(s.entries()));const m=await D(Object.fromEntries(t.entries()),E);if(m!==!0){o.value=m;return}l.value=!0,o.value={},t.get("is_half")==="true"?t.append("days",.5):t.append("days",j(t.get("leave_from"),t.get("leave_to")));try{await v.collection("leave").create(t),p.fire({title:"success!",text:"successfully created leave",icon:"success"}),_.push("/leave")}catch(r){console.log(r.data),p.fire({title:"Error!",text:r.data.message,icon:"error"})}finally{l.value=!1}}return(n,a)=>(f(),d("div",O,[u(y,{links:[{label:"Dashboard",path:"/",isActive:!1},{label:"Leave",path:"/leave",isActive:!1},{label:"Add",path:"/leave/add",isActive:!0}]}),e("div",V,[e("div",N,[e("form",{novalidate:"",onSubmit:h,ref_key:"formEl",ref:g},[e("fieldset",{disabled:l.value},[a[0]||(a[0]=e("legend",{class:"has-text-weight-bold"}," Add Employee ",-1)),a[1]||(a[1]=e("div",{class:"is-flex is-flex-direction-row-reverse"},[e("button",{class:"button is-dark",type:"submit"}," Save ")],-1)),e("div",R,[(f(!0),d(S,null,x(F(w),s=>(f(),d("div",C,[u(k,{form:s,errors:o.value,defaultValue:b[s.name]},null,8,["form","errors","defaultValue"])]))),256))])],8,L)],544)])])]))}};export{H as default};
