import{B as x,c as L}from"./BreadCrumb-TF3kDMJB.js";import{r as d,b as g,i as w,c as l,j as b,k as o,a as n,F as r,f as h,o as t,d as B,t as m,x as C,l as D}from"./index-C7IYLqTz.js";import{L as S}from"./LoadingSkeleton-DhLAkGpz.js";import{s as T}from"./print-Dy9ZJ0iI.js";import{_ as M}from"./Avatar-BQIjk-Wl.js";const V="http://192.168.200.22:5173",$={key:2},j={id:"contentToPrint"},H={key:0,class:"pl-6"},N={class:"card mt-4"},O={class:"card-content"},P={class:"columns is-multiline"},E={key:0,class:"column is-4"},F={class:"mb-2"},z=["value"],A={key:1,class:"column is-4"},I={class:"mb-2"},R=["value"],q={key:2,class:"column is-4"},G={class:"mb-2"},J={class:"mb-2"},K=["innerHTML"],Z={__name:"DetailView",props:{collection:String,breadcrumb:Object,breadcrumbLabel:String,viewList:Object,expand:{type:String,default:""}},setup(c){const i=c,p=d(!1),a=d(null),y=d(null),u=d(null),v=D();g(()=>{u.value=i.breadcrumb}),w(()=>v.params.id,f,{immediate:!0}),console.log(i.expand);async function f(_){y.value=null,a.value=null,p.value=!0;try{const s=await L.collection(i.collection).getOne(v.params.id,{expand:i.expand});i.breadcrumbLabel!==void 0&&u.value.push({label:s[i.breadcrumbLabel],path:`/${v.path}/${s.id}`,isActive:!0}),a.value=s,console.log(s)}catch(s){s.value=s.data.message}finally{p.value=!1}}function k(){var _=document.getElementById("contentToPrint").outerHTML;T(_),window.open(`${V}/#print`,"_blank","width=800,height=600")}return(_,s)=>(t(),l(r,null,[u.value?(t(),b(x,{key:0,links:u.value},null,8,["links"])):o("",!0),p.value?(t(),b(S,{key:1})):o("",!0),a.value!=null?(t(),l("div",$,[n("div",{class:"is-flex is-flex-direction-row-reverse mb-4"},[n("button",{class:"button is-secondary",onClick:k},s[0]||(s[0]=[n("i",{class:"bi bi-printer"},null,-1)]))]),n("div",j,[(t(!0),l(r,null,h(c.viewList,e=>(t(),l(r,null,[e.type==="profile_photo"?(t(),l("div",H,[B(M,{filename:a.value[e.name],record:a.value,size:"128x128"},null,8,["filename","record"])])):o("",!0)],64))),256)),n("div",N,[n("div",O,[n("div",P,[(t(!0),l(r,null,h(c.viewList,e=>(t(),l(r,null,[e.type==="text"?(t(),l("div",E,[n("p",F,m(e.label),1),n("input",{type:"text",class:"input",value:a.value[e.name],readonly:"",disabled:""},null,8,z)])):o("",!0),e.type==="date"?(t(),l("div",A,[n("p",I,m(e.label),1),n("input",{type:"text",class:"input",value:a.value[e.name].split(" ")[0],readonly:"",disabled:""},null,8,R)])):o("",!0),e.type==="text_component"?(t(),l("div",q,[n("p",G,m(e.label),1),(t(),b(C(e.component),{item:a.value,header:e},null,8,["item","header"]))])):o("",!0)],64))),256))]),(t(!0),l(r,null,h(c.viewList,e=>(t(),l(r,null,[e.type==="rich_text"&&a.value[e.name]!==""?(t(),l(r,{key:0},[n("p",J,m(e.label),1),n("div",{class:"box",style:{width:"60rem"},innerHTML:a.value[e.name]},null,8,K)],64)):o("",!0)],64))),256))])])])])):o("",!0)],64))}};export{Z as _};
