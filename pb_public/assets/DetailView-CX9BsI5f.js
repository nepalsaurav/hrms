import{B as g}from"./BreadCrumb-QusY3eB5.js";import{r as u,x as w,m as B,c as l,p as b,d as o,a as s,u as h,F as r,f as _,o as t,b as C,z as S,t as v,E as D,q as V,g as M,L as N}from"./index-DhUzF4e6.js";import{k as O}from"./index-Ddm7-nYC.js";const R={key:2},T={class:"is-flex is-flex-direction-row-reverse mb-4"},$={key:0,class:"pl-6"},j={class:"section"},z={class:"columns is-multiline"},E={key:0,class:"column is-4"},F={class:"mb-2"},H=["value"],q={key:1,class:"column is-4"},A={class:"mb-2"},P=["value"],G={key:2,class:"column is-4"},I={class:"mb-2"},J={class:"mb-2"},K=["innerHTML"],X={__name:"DetailView",props:{collection:String,breadcrumb:Object,breadcrumbLabel:String,viewList:Object,expand:{type:String,default:""}},setup(c){const i=c,m=u(!1),n=u(null),k=u(null),d=u(null),p=V(),y=u();w(()=>{d.value=i.breadcrumb}),B(()=>p.params.id,x,{immediate:!0});async function x(L){k.value=null,n.value=null,m.value=!0;try{const a=await M.collection(i.collection).getOne(p.params.id,{expand:i.expand});i.breadcrumbLabel!==void 0&&d.value.push({label:a[i.breadcrumbLabel],path:`/${p.path}/${a.id}`,isActive:!0}),n.value=a,console.log(a)}catch(a){a.value=a.data.message}finally{m.value=!1}}const{handlePrint:f}=O({content:y,documentTitle:"detail view"});return(L,a)=>(t(),l(r,null,[d.value?(t(),b(g,{key:0,links:d.value},null,8,["links"])):o("",!0),m.value?(t(),b(N,{key:1})):o("",!0),n.value!=null?(t(),l("div",R,[s("div",T,[s("button",{class:"button is-secondary",onClick:a[0]||(a[0]=(...e)=>h(f)&&h(f)(...e))},a[1]||(a[1]=[s("i",{class:"bi bi-printer"},null,-1)]))]),s("div",{ref_key:"componentRef",ref:y},[(t(!0),l(r,null,_(c.viewList,e=>(t(),l(r,null,[e.type==="profile_photo"?(t(),l("div",$,[C(S,{filename:n.value[e.name],record:n.value,size:"128x128"},null,8,["filename","record"])])):o("",!0)],64))),256)),s("div",j,[s("div",z,[(t(!0),l(r,null,_(c.viewList,e=>(t(),l(r,null,[e.type==="text"?(t(),l("div",E,[s("p",F,v(e.label),1),s("input",{type:"text",class:"input",value:n.value[e.name],readonly:"",disabled:""},null,8,H)])):o("",!0),e.type==="date"?(t(),l("div",q,[s("p",A,v(e.label),1),s("input",{type:"text",class:"input",value:n.value[e.name].split(" ")[0],readonly:"",disabled:""},null,8,P)])):o("",!0),e.type==="text_component"?(t(),l("div",G,[s("p",I,v(e.label),1),(t(),b(D(e.component),{item:n.value,header:e},null,8,["item","header"]))])):o("",!0)],64))),256))]),(t(!0),l(r,null,_(c.viewList,e=>(t(),l(r,null,[e.type==="rich_text"&&n.value[e.name]!==""?(t(),l(r,{key:0},[s("p",J,v(e.label),1),s("div",{class:"box",style:{width:"60rem"},innerHTML:n.value[e.name]},null,8,K)],64)):o("",!0)],64))),256))])],512)])):o("",!0)],64))}};export{X as _};
