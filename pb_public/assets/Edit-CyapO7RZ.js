import{c as h,B as w}from"./BreadCrumb-TF3kDMJB.js";import{f as E,v as x}from"./forms-CjjuBC5h.js";import{R as B}from"./RenderForms-DFjF9nMb.js";import{t as D,v as F}from"./utils-cUNVy0Hq.js";import{S as _}from"./sweetalert2.esm.all-DPo3DB14.js";import{r,i as j,c as o,d as b,a as t,j as O,k as f,F as V,f as A,u as L,t as R,l as N,o as a,h as C}from"./index-C7IYLqTz.js";import{L as P}from"./LoadingSkeleton-DhLAkGpz.js";import"./index.esm-CWnM2rkH.js";const q={class:"container"},z={class:"card"},G={class:"card-content"},H=["disabled"],I={class:"columns is-multiline"},J={class:"column is-4"},K={key:2},ee={__name:"Edit",setup(M){const c=r({}),u=r(!1),g=C(),d=N(),m=r(!0),l=r(null),i=r(null);async function y(s){l.data=i.value=null;try{const e=await h.collection("leave").getOne(s);i.value=e}catch(e){e.data.message&&(l.value=e.data.message)}finally{m.value=!1}}j(d.params,()=>{y(d.params.id)},{immediate:!0});async function k(s){s.preventDefault();const e=s.target,n=new FormData(e);let v=D(Object.fromEntries(n.entries()));const p=await F(Object.fromEntries(v.entries()),x);if(p!==!0){c.value=p;return}u.value=!0,c.value={};try{await h.collection("leave").update(d.params.id,v)}catch(S){_.fire({title:"Error!",text:S.data.message,icon:"error"})}finally{_.fire({title:"Success!",text:"successfully udated leave",icon:"success"}),g.push("/leave")}u.value=!1}return(s,e)=>(a(),o("div",q,[b(w,{links:[{label:"Dashboard",path:"/",isActive:!1},{label:"Leave",path:"/leave",isActive:!1},{label:"Edit",path:"/leave/edit",isActive:!0}]}),t("div",z,[t("div",G,[m.value?(a(),O(P,{key:0})):f("",!0),!m.value&&i.value!==null?(a(),o("form",{key:1,novalidate:"",onSubmit:k},[t("fieldset",{disabled:u.value},[e[0]||(e[0]=t("legend",{class:"has-text-weight-bold"}," Add Employee ",-1)),e[1]||(e[1]=t("div",{class:"is-flex is-flex-direction-row-reverse"},[t("button",{class:"button is-dark",type:"submit"}," Save ")],-1)),t("div",I,[(a(!0),o(V,null,A(L(E),n=>(a(),o("div",J,[b(B,{form:n,errors:c.value,defaultValue:i.value[n.name]},null,8,["form","errors","defaultValue"])]))),256))])],8,H)],32)):f("",!0),l.value!=null?(a(),o("p",K,R(l.value),1)):f("",!0)])])]))}};export{ee as default};
